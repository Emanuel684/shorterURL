{"remainingRequest":"/home/oem/Desktop/AcortadorURLs/shorterURL/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/oem/Desktop/AcortadorURLs/shorterURL/src/views/Workshop.vue?vue&type=style&index=0&id=036a2841&scoped=true&lang=css","dependencies":[{"path":"/home/oem/Desktop/AcortadorURLs/shorterURL/src/views/Workshop.vue","mtime":1647895720125},{"path":"/home/oem/Desktop/AcortadorURLs/shorterURL/node_modules/css-loader/dist/cjs.js","mtime":1647874595079},{"path":"/home/oem/Desktop/AcortadorURLs/shorterURL/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1647874591187},{"path":"/home/oem/Desktop/AcortadorURLs/shorterURL/node_modules/postcss-loader/src/index.js","mtime":1647874590087},{"path":"/home/oem/Desktop/AcortadorURLs/shorterURL/node_modules/cache-loader/dist/cjs.js","mtime":1647874594351},{"path":"/home/oem/Desktop/AcortadorURLs/shorterURL/node_modules/vue-loader-v16/dist/index.js","mtime":1647874586991}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci53b3Jrc2hvcCB7CiAgbWFyZ2luLXRvcDogMi4yMiU7Cn0KLmJ0bi1jdXN0b20gewogIGJhY2tncm91bmQtY29sb3I6ICNkNDZjMjc7CiAgY29sb3I6IHdoaXRlOwp9Cg=="},{"version":3,"sources":["/home/oem/Desktop/AcortadorURLs/shorterURL/src/views/Workshop.vue"],"names":[],"mappings":";AA8OA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACnB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACd","file":"/home/oem/Desktop/AcortadorURLs/shorterURL/src/views/Workshop.vue","sourceRoot":"","sourcesContent":["// eslint-disable-next-line\n\n<template>\n  <div class=\"workshop\">\n    <div class=\"p-5 mb-4 bg-light rounded-3\" id=\"banner\">\n      <h2>{{ _mod.content.header }}</h2>\n      <p>\n        {{ _mod.content.headerInfo }}\n      </p>\n    </div>\n\n    <div class=\"container\">\n      <div class=\"container w-75 mt-4 mb-4\">\n        <TheAlertNotification\n          v-if=\"processed\"\n          :url=\"new_url\"\n          :alerttype=\"status\"\n          :mod=\"mod\"\n        />\n\n        <!-- @submit.prevent prevents browser refresh -->\n        <form action=\"\" @submit.prevent=\"methodCall\">\n          <div class=\"input-group\">\n            <input\n              id=\"old_url\"\n              type=\"text\"\n              class=\"form-control\"\n              placeholder=\"Pegue su enlace aquÃ­...\"\n              required\n              v-model=\"old_url\"\n            />\n            <div class=\"input-group-append\">\n              <input class=\"btn btn-custom\" type=\"submit\" value=\"Continuar\" />\n            </div>\n          </div>\n        </form>\n        <!-- <span v-if=\"mod == 'shorten' ? true : false\"\n          >Try this one <a href=\"\">https://weatherextension.com/</a></span\n        > -->\n        <br />\n        <button\n          v-if=\"status === 'success' && ['shorten', 'expand'].includes(mod)\"\n          @click=\"copyText('link')\"\n          class=\"m-50 btn btn-dark\"\n        >\n          Copy to Clipboard\n        </button>\n      </div>\n\n      <router-view\n        v-if=\"mod == 'stats' && status === 'success'\"\n        :stats=\"stats\"\n        :key=\"$route.path\"\n      />\n    </div>\n\n    <p id=\"link\" v-show=\"false\">{{ new_url }}</p>\n  </div>\n</template>\n\n<script>\nimport TheAlertNotification from \"@/components/TheAlertNotification.vue\";\nimport Store from \"@/assets/store.js\";\n\nconst url = new URL(\"https://api-ssl.bitly.com/v4/\");\nlet api_key = process.env.API_TOKEN;\n\nlet headers = {\n  Authorization: `Bearer 9f8a069b2ea6809fcc306f20d54af4650f59f8b7`,\n  \"Content-Type\": \"application/json\",\n};\n\nexport default {\n  data() {\n    return {\n      old_url: \"\",\n      new_url: \"\",\n      status: \"\",\n      stats: \"\",\n      processed: false,\n    };\n  },\n  components: {\n    TheAlertNotification,\n  },\n  props: { mod: { type: String, required: true } },\n  computed: {\n    _mod() {\n      return Store.functionalities.find(\n        (i) => i.name.toLowerCase() === this.mod\n      );\n    },\n  },\n  methods: {\n    methodCall() {\n      switch (this.mod) {\n        case \"shorten\":\n          this.shortenUrl();\n          break;\n        case \"expand\":\n          this.expandUrl();\n          break;\n        case \"delete\":\n          this.deleteUrl();\n          break;\n        case \"stats\":\n          this.urlStats();\n          break;\n\n        default:\n          this.shortenUrl();\n      }\n    },\n    async shortenUrl() {\n      this.processed = false;\n      console.log(\"shortenUrl\");\n      console.log(this.old_url);\n\n      fetch(`https://api-ssl.bitly.com/v4/shorten`, {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer 9f8a069b2ea6809fcc306f20d54af4650f59f8b7\",\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          long_url: this.old_url,\n          domain: \"bit.ly\",\n        }),\n      })\n        .then((response) => response.json())\n        .then((json) => {\n          console.log(`json : ${JSON.stringify(json)}`);\n          if (json != null && json.link != null) {\n            this.new_url = json.link;\n            this.status = \"success\";\n          } else {\n            this.status = \"danger\";\n          }\n          this.processed = true;\n        })\n        .catch((err) => {\n          console.log(`error occured shortening url : ${err}`);\n          this.status = \"danger\";\n        });\n    },\n    expandUrl() {\n      this.processed = false;\n\n      fetch(`https://api-ssl.bitly.com/v4/expand`, {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer 9f8a069b2ea6809fcc306f20d54af4650f59f8b7\",\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ bitlink_id: \"bit.ly/3IGLWVH\" }),\n      })\n        .then((response) => response.json())\n        .then((json) => {\n          console.log('expandURL  ',json);\n          this.new_url = json.long_url;\n          this.status = \"success\";\n        })\n        .catch((err) => {\n          console.log(`error oocured expanding url : ${err}`);\n          this.status = \"danger\";\n        });\n      this.processed = true;\n    },\n    deleteUrl() {\n      console.log(`deleting link....`);\n      console.log(this.old_url);\n      this.processed = false;\n      let body = {\n        short_url: this.old_url,\n        api_token:\n          api_key ||\n          \"qnZX77rpksviT5hcfs231mpnFXi5yBQtKUhjlfXsCsTI0hTyXTqQVtynM9BU\",\n      };\n\n      fetch(url, {\n        method: \"DELETE\",\n        headers: headers,\n        body: JSON.stringify(body),\n      })\n        .then((response) => response.json())\n        .then((json) => {\n          console.log(json);\n          //   this.new_url = json.long_url;\n          this.status = \"success\";\n        })\n        .catch((err) => {\n          console.log(`error oocured deleting url : ${err}`);\n          this.status = \"danger\";\n        });\n      this.processed = true;\n    },\n    async urlStats() {\n      console.log(\"running here ...\");\n\n      this.processed = false;\n      let params = {\n        short_url: this.old_url,\n        api_token:\n          api_key ||\n          \"qnZX77rpksviT5hcfs231mpnFXi5yBQtKUhjlfXsCsTI0hTyXTqQVtynM9BU\",\n      };\n\n      var _url = new URL(`${url}/stats`);\n      _url.search = new URLSearchParams(params).toString();\n\n      fetch(_url, {\n        method: \"GET\",\n        headers: headers,\n      })\n        .then((response) => response.json())\n        .then((json) => {\n          console.log(json);\n          if (json != null && \"browsers\" in json) {\n            this.stats = JSON.stringify(json);\n            this.status = \"success\";\n          }\n        })\n        .catch((err) => {\n          console.log(`error occured getting stats of url : ${err}`);\n          this.status = \"danger\";\n        });\n      this.processed = true;\n      this.$router.push({ name: \"Stats\" });\n    },\n    copyText(id) {\n      let element = document.getElementById(id);\n      navigator.clipboard.writeText(element.textContent);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.workshop {\n  margin-top: 2.22%;\n}\n.btn-custom {\n  background-color: #d46c27;\n  color: white;\n}\n</style>\n"]}]}